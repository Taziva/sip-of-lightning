# Migration `20210117161442-keystone-ckk1cbdt90000toyifdigfog7`

This migration has been generated by Taziva at 1/17/2021, 4:14:42 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "WeeklyDonut" DROP CONSTRAINT "WeeklyDonut_spotifyPlaylist_fkey"

CREATE TABLE "Donut" (
"id" SERIAL,
    "title" TEXT,
    "state" TEXT,
    "publishedAt_utc" TIMESTAMP(3),
    "publishedAt_offset" TEXT,
    "image" JSONB,
    "updatedAt_utc" TIMESTAMP(3),
    "updatedAt_offset" TEXT,
    "createdAt_utc" TIMESTAMP(3),
    "createdAt_offset" TEXT,
    "spotifyPlaylist" INTEGER,

    PRIMARY KEY ("id")
)

DROP TABLE "WeeklyDonut"

ALTER TABLE "Donut" ADD FOREIGN KEY("spotifyPlaylist")REFERENCES "SpotifyPlaylist"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210117161125-keystone-ckk1c75hw0000r2yi6d6c8jvj..20210117161442-keystone-ckk1cbdt90000toyifdigfog7
--- datamodel.dml
+++ datamodel.dml
@@ -1,6 +1,6 @@
 datasource postgresql {
-  url = "***"
+  url = "***"
   provider = "postgresql"
 }
 generator client {
@@ -42,9 +42,9 @@
   slug            String? @unique
   from_categories Post[]  @relation("Post_categories_many", references: [id])
 }
-model WeeklyDonut {
+model Donut {
   id                 Int              @id @default(autoincrement())
   title              String?
   state              String?
   publishedAt_utc    DateTime?
@@ -53,14 +53,14 @@
   updatedAt_utc      DateTime?
   updatedAt_offset   String?
   createdAt_utc      DateTime?
   createdAt_offset   String?
-  spotifyPlaylist    SpotifyPlaylist? @relation("WeeklyDonutspotifyPlaylist", fields: [spotifyPlaylistId], references: [id])
+  spotifyPlaylist    SpotifyPlaylist? @relation("DonutspotifyPlaylist", fields: [spotifyPlaylistId], references: [id])
   spotifyPlaylistId  Int?             @map("spotifyPlaylist")
 }
 model SpotifyPlaylist {
-  id          Int           @id @default(autoincrement())
-  uri         String?
-  uid         String?
-  WeeklyDonut WeeklyDonut[] @relation("WeeklyDonutspotifyPlaylist")
+  id    Int     @id @default(autoincrement())
+  uri   String?
+  uid   String?
+  Donut Donut[] @relation("DonutspotifyPlaylist")
 }
```


